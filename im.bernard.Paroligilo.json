{
    "id" : "im.bernard.Paroligilo",
    "runtime" : "org.gnome.Platform",
    "runtime-version" : "master",
    "sdk" : "org.gnome.Sdk",
    "command" : "paroligilo",
    "finish-args" : [
        "--share=network",
        "--share=ipc",
        "--socket=fallback-x11",
        "--device=all",
        "--socket=wayland",
        "--socket=pulseaudio"
    ],
    "cleanup" : [
        "/include",
        "/lib/pkgconfig",
        "/man",
        "/share/doc",
        "/share/gtk-doc",
        "/share/man",
        "/share/pkgconfig",
        "*.la",
        "*.a"
    ],
    "modules" : [
    	"python3-flatpak-requirements.json",
    	{
            "name": "espeak",
            "buildsystem": "autotools",
            "config-opts": [
                "--with-pic",
                "--enable-static",
                "--with-pcaudiolib=no",
                "--with-sonic=no",
                "--with-speechplayer=no",
                "--with-mbrola=yes",
                "--with-extdict-ru"
            ],
            "sources": [
            {
                "type": "archive",
                "url": "https://github.com/rhasspy/espeak-ng/archive/8593723f10cfd9befd50de447f14bf0a9d2a14a4.zip",
                "sha256": "cc8092f23a28ccd79b1c5e62984a4c4ac1959d2d0b8193ac208d728c620bd5ed"
            }
            ]
        },

          {
	    "name": "onnx",
	    "buildsystem": "simple",
	    "build-commands": [
	      "cp -r --no-target-directory ./include /app/include",
	      "cp -r --no-target-directory ./lib /app/lib"
	    ],
	    "sources": [
	      {
		"type": "archive",
		"only-arches": [
		  "x86_64"
		],
		"url": "https://github.com/microsoft/onnxruntime/releases/download/v1.16.1/onnxruntime-linux-x64-1.16.1.tgz",
		"sha256": "53a0f03f71587ed602e99e82773132fc634b74c2d227316fbfd4bf67181e72ed"
	      },
	      {
		"type": "archive",
		"only-arches": [
		  "aarch64"
		],
		"url": "https://github.com/microsoft/onnxruntime/releases/download/v1.16.1/onnxruntime-linux-aarch64-1.16.1.tgz",
		"sha256": "f10851b62eb44f9e811134737e7c6edd15733d2c1549cb6ce403808e9c047385"
	      }
	    ]
	  },

          {
	    "name": "piperphonemize",
	    "buildsystem": "cmake-ninja",
	    "config-opts": [
	      "-DCMAKE_BUILD_TYPE=Release",
	      "-DPKG_CONFIG_USE_CMAKE_PREFIX_PATH=ON",
	      "-DCMAKE_POSITION_INDEPENDENT_CODE=ON"
	    ],
	    "sources": [
	      {
		"type": "archive",
		"url": "https://github.com/rhasspy/piper-phonemize/archive/7f7b5bd4de22f7fe24341c5bedda0dc1e33f3666.zip",
		"sha256": "6bdcb21f6c5ae0deff7c9ae26bf07b994791dc800c1962fd216727e66a409929"
	      },
	        {
	         "type": "patch",
	         "path": "../patches/piperphonemize.patch"
		}
	   ]
  	},
	{
	    "name": "mbrola",
	    "buildsystem": "simple",
	    "build-commands": [
	      "make",
	      "mkdir -p /app/bin",
	      "cp Bin/mbrola /app/bin"
	    ],
	    "sources": [
	      {
		"type": "archive",
		"url": "https://github.com/numediart/MBROLA/archive/refs/tags/3.3.tar.gz",
		"sha256": "c01ded2c0a05667e6df2439c1c02b011a5df2bfdf49e24a524630686aea2b558"
	      }
	    ]
	  },

	{
	    "name": "python3-voxpopuli",
	    "buildsystem": "simple",
	    "build-commands": [
		"pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"voxpopuli\" --no-build-isolation"
	    ],
	    "sources": [
		{
		    "type": "file",
		    "url": "https://files.pythonhosted.org/packages/d1/b5/251092f46d38f2b11ebc537f0d46f09e4f701998a01f91915826eccbc581/voxpopuli-0.3.9-py3-none-any.whl",
		    "sha256": "86aeb78bc074610227ec2e9076d874ba685be5ea388ce2629fa426e5eb926bda"
		}
	    ]
	},

        {
            "name" : "paroligilo",
            "builddir" : true,
            "buildsystem" : "meson",
            "sources" : [
                {
                    "type" : "git",
                    "url" : "file:///home/walter/builder-projekte"
                }
            ]
        }
    ]
}
